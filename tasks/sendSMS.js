var http = require('http');

var phoneNumbers = ["9100080966", "9100080866", "9100080867", "9100080876", "9100080902", "9100080906", "9100080972", "9100080992", "9100080870", "9100080907", "9100080862", "9100080968", "9100080905", "9100080990", "9100080903", "9100080860", "9100080285", "9100080861", "9100080864", "9100080868", "9100080871", "9100080282", "9100080973", "9100080300", "9100080872", "9100080989", "9100080971", "9100080899", "9100080967", "9100081031", "9100081003", "9100081032", "9100081033", "9100081022", "9100081020", "9100080280", "9100081014", "9100081021", "9100081005", "9100081007", "9100081025", "9100081002", "9100081040", "9100080904", "9100081035", "9100081023", "9100081029", "9100081004", "9100080976", "9100081034", "9100080279", "9100081011", "9100080877", "9100081016", "9100080986", "9100081009", "9100081008", "9100080863", "9100080284", "9100080988", "9100080991", "9100080869", "9100080875", "9100080900", "9100080873", "9100080874", "9100080908", "9100080858", "9100080965", "9100080969", "9100081027", "9100081015", "9100080283", "9100081018", "9100080993", "9100081012", "9100081010", "9100081036", "9100080987", "9100081006", "9100081030", "9100080985", "9100080970", "9100081024", "9100081041", "9100081042", "9100081026", "9100081013", "9100081019", "9100081028", "9100081017", "9100080901", "9100080859"];
var setIP = "IP1,52.172.11.100,5062";
var setTimeInterval = "TI30M";

// phoneNumbers = ["9985572137"];
phoneNumbers.forEach(function(number) {

	http.get({
		hostname: '5.189.163.240',
		port: 80,
		path: '/httpapi/sendmsg.php?user=callhealth3&password=OGEZ1Ah4&from=calltr&to=' + number + '&message=' + setIP + '&msg_type=t&dcs=0&deliv_ack=1&udh=0',
		agent: false // create a new agent just for this one request
	}, (res) => {
		// Do stuff with response
		res.on('data', (data) => {
			console.log(data.toString('utf8'));
		});
	});

	setTimeout(function() {
		http.get({
			hostname: '5.189.163.240',
			port: 80,
			path: '/httpapi/sendmsg.php?user=callhealth3&password=OGEZ1Ah4&from=calltr&to=' + number + '&message=' + setTimeInterval + '&msg_type=t&dcs=0&deliv_ack=1&udh=0',
			agent: false // create a new agent just for this one request
		}, (res) => {
			// Do stuff with response
			res.on('data', (data) => {
				console.log(data.toString('utf8'));
			});
		});

	}, 10000);
});